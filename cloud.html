<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Cloud - Internal Marks</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
   body{font-family:Segoe UI, Arial; 
   background:linear-gradient(180deg,#eef2ff,#f8fbff);
   margin:0;padding:40px;} .card{max-width:1000px;margin:40px auto;
   padding:36px;background:#fff;
   border-radius:16px;
   box-shadow:0 12px 30px rgba(15,23,42,0.08);
   text-align:center;} h1{color:#334155;margin-bottom:12px;}
    #chartWrap{height:420px;} #noData{color:#64748b;margin-top:20px;} a.back{display:inline-block;margin-top:18px;padding:10px 18px;background:#64748b;color:#fff;border-radius:10px;text-decoration:none;}
    </style>
</head>
<body>
  <div class="card">
    <h3> CLOUD — Internal Marks</h3>
    <div id="chartWrap"><canvas id="chart"></canvas></div>
    <div id="noData" style="display:none;">No data available for this subject.</div>
    <a class="back" href="graph.html">⬅ Back to Subjects</a>
  </div>

  <script>
const token = localStorage.getItem("token");
const subject = "cloud";   // change per page: maths, dsa, cloud, oops

async function loadGraph() {
  const res = await fetch("http://localhost:5000/api/graph", {
    headers: { "Authorization": "Bearer " + token }
  });

  const graph = await res.json();
  console.log(graph);

  if (!graph[subject] || graph[subject].length === 0) {
    document.getElementById("noData").style.display = "block";
    return;
  }

  const ctx = document.getElementById("chart").getContext("2d");

  new Chart(ctx, {
    type: "line",
    data: {
      labels: ["1","2","3"],
      datasets: [{
        label: subject.toUpperCase() + " Marks",
        data: graph[subject],
        borderWidth: 3
      }]
    },
    options: {
      scales: {
        y: { min: 0, max: 100 }
      }
    }
  });
}

loadGraph();
</script>

</body>
</html>
